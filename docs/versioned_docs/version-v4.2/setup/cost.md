---
sidebar_position: 8
---
# 再生コストについて
このボットは、再生に当たって音声データのデコードや変換などを内部的に行うため、その際にコストが発生します。  
合計コストが高くなると、ボットサーバーの負荷が高くなったり負荷が遅延する可能性があります。  

:::danger
このボットは、複数のサーバーでの同時再生には対応しているものの、シャーディングなどのシステムは実装されていないため、数千/数万ものサーバーに参加するような大規模なボットの運営には向いていません。
:::

[`システム情報`コマンド](../guide/commands/log.md)を使用すると、現在のボットのコストの合計や、CPU使用率などの情報を表示することができます。  

:::info
コスト数は、ボットがホストされているサーバーにかかっている現在の負荷を表す指数です。
:::

:::info
以下はボットの内部のコストの計算方法などを記しています。通常は参照する必要はありません。
:::

一般に、コスト数は低く保つことでボットを安定化することができます。ボットが不安定になった際には、安定化のために、コストを参考にしてください。

## コストの計算
ボットで取得された楽曲のデータは、以下のように処理されます。

<img src="https://static-objects.usamyon.moe/dsmb/docs-assets/play_cost_graph.jpg" width="600" />

コストは各経路内の`Cost`の値の合計となります。  

- エフェクト機能が有効になっていた場合、どのようなソースであっても、FFmpeg (コスト2)を通過します。
- ボリューム機能が有効になっていた場合、中央のVolume Transformerを通過します。

ボットは、各種設定をもとに、最も負荷の少ない方法でデータを変換しようとします。

## コストを下げるには
コストを下げるには、以下のような対策があげられます
- ボリューム調節機能を使わない
- エフェクト機能を使わない
